<div class="autocomplete-input">
  <input
    type="text"
    [(ngModel)]="searchQuery"
    (input)="onSearch()"
    (focus)="onFocus()"
    [placeholder]="placeholder"
    autocomplete="off"
  >
  @if (searchQuery) {
    <span class="reset-icon" (click)="onReset()"><i class="fa-solid fa-times"></i></span>
  }
  <span class="search-icon">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="11" cy="11" r="8"/>
      <path d="m21 21-4.35-4.35"/>
    </svg>
  </span>
  @if (showDropdown) {
    <div class="autocomplete-dropdown">
      @if (isLoading) {
        <div class="autocomplete-loading">טוען...</div>
      } @else if (filteredMembers.length === 0) {
        <div class="autocomplete-empty">לא נמצאו תוצאות</div>
      } @else {
        @for (member of filteredMembers; track member.id) {
          <button type="button" class="autocomplete-option" (click)="selectMember(member)">
            {{ member.name }}
          </button>
        }
      }
    </div>
  }
</div>
