<div class="dialog-backdrop">
  <div class="dialog-container">
    <div class="dialog-header">
      <button class="close-btn" (click)="onClose()">
        <i class="fa-regular fa-circle-xmark"></i>
      </button>
      <h2>{{ isEditMode ? 'עריכת חשבונית' : 'יצירת חשבונית חדשה' }}</h2>
    </div>

    <form (ngSubmit)="onSubmit()">
      <div class="form-content">
        <div class="form-grid">
          <!-- Row 1 -->
          <div class="form-group">
            <label class="required">לקוח:</label>
            <app-member-autocomplete
              [memberName]="invoice.fullName"
              (memberSelected)="onMemberSelected($event)"
              placeholder="חיפוש לקוח..."
            ></app-member-autocomplete>
          </div>
          <div class="form-group">
            <label class="required">סוג חשבונית:</label>
            <app-custom-select
              [options]="invoiceTypeOptions"
              [(value)]="invoice.invoiceType"
              placeholder="בחר סוג חשבונית"
            ></app-custom-select>
          </div>

          <!-- Row 2 -->
          <div class="form-group">
            <label>סכום:</label>
            <div class="amount-input">
              <input type="number" [(ngModel)]="invoice.amount" name="amount" placeholder="">
              <span class="currency">ש"ח</span>
            </div>
          </div>
          <div class="form-group">
            <label class="required">תאריך:</label>
            <input type="date" [(ngModel)]="invoice.gregorianDate" name="gregorianDate">
          </div>

          <!-- Row 3 -->
          <div class="form-group full-width">
            <label>תיאור:</label>
            <input type="text" [(ngModel)]="invoice.description" name="description" placeholder="">
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-primary" [disabled]="isSubmitting">
          <span class="btn-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
              <polyline points="17 21 17 13 7 13 7 21"/>
              <polyline points="7 3 7 8 15 8"/>
            </svg>
          </span>
          {{ isSubmitting ? 'שומר...' : (isEditMode ? 'עדכן חשבונית' : 'צור חשבונית') }}
        </button>
      </div>
    </form>
  </div>
</div>
